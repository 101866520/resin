{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\golde\\\\resin\\\\src\\\\TimeAxis.js\";\n\n/**\r\n *  Copyright (c) 2015-present, The Regents of the University of California,\r\n *  through Lawrence Berkeley National Laboratory (subject to receipt\r\n *  of any required approvals from the U.S. Dept. of Energy).\r\n *  All rights reserved.\r\n *\r\n *  This source code is licensed under the BSD-style license found in the\r\n *  LICENSE file in the root directory of this source tree.\r\n */\nimport _ from \"underscore\";\nimport merge from \"merge\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\"; // eslint-disable-line\n\nimport PropTypes from \"prop-types\";\nimport { axisBottom } from \"d3-axis\";\nimport { select } from \"d3-selection\";\nimport \"d3-selection-multi\";\nimport { timeDay, utcDay, timeMonth, utcMonth, timeYear, utcYear } from \"d3-time\";\nimport { timeFormat } from \"d3-time-format\";\nimport \"moment-duration-format\";\n\nfunction scaleAsString(scale) {\n  return \"\".concat(scale.domain().toString(), \"-\").concat(scale.range().toString());\n}\n\nconst defaultStyle = {\n  values: {\n    stroke: \"none\",\n    fill: \"#8B7E7E\",\n    // Default value color\n    fontWeight: 100,\n    fontSize: 11,\n    font: '\"Goudy Bookletter 1911\", sans-serif\"'\n  },\n  ticks: {\n    fill: \"none\",\n    stroke: \"#C0C0C0\"\n  },\n  axis: {\n    fill: \"none\",\n    stroke: \"#C0C0C0\"\n  }\n};\n/**\r\n * Renders a horizontal time axis. This is used internally by the ChartContainer\r\n * as a result of you specifying the timerange for the chart. Please see the API\r\n * docs for ChartContainer for more information.\r\n */\n\nexport default class TimeAxis extends React.Component {\n  componentDidMount() {\n    const _this$props = this.props,\n          scale = _this$props.scale,\n          format = _this$props.format,\n          showGrid = _this$props.showGrid,\n          gridHeight = _this$props.gridHeight;\n    this.renderTimeAxis(scale, format, showGrid, gridHeight);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const scale = nextProps.scale,\n          utc = nextProps.utc,\n          format = nextProps.format,\n          showGrid = nextProps.showGrid,\n          gridHeight = nextProps.gridHeight;\n\n    if (scaleAsString(this.props.scale) !== scaleAsString(scale) || this.props.utc !== utc || this.props.showGrid !== showGrid || this.props.gridHeight !== gridHeight) {\n      this.renderTimeAxis(scale, format, showGrid, gridHeight);\n    }\n  } // Force the component not to update because d3 will control the\n  // DOM from this point down.\n\n\n  shouldComponentUpdate() {\n    // eslint-disable-line\n    return false;\n  }\n\n  mergeStyles(style) {\n    return {\n      valueStyle: merge(true, defaultStyle.values, this.props.style.values ? this.props.style.values : {}),\n      tickStyle: merge(true, defaultStyle.ticks, this.props.style.ticks ? this.props.style.ticks : {})\n    };\n  }\n\n  renderTimeAxis(scale, format, showGrid, gridHeight) {\n    let axis;\n    const tickSize = showGrid ? -gridHeight : 10;\n    const utc = this.props.utc;\n    const tickCount = this.props.tickCount;\n    const style = this.mergeStyles(this.props.style);\n    const tickStyle = style.tickStyle,\n          valueStyle = style.valueStyle;\n\n    if (tickCount > 0) {\n      if (format === \"day\") {\n        axis = axisBottom(scale).tickArguments([utc ? utcDay : timeDay, 1, tickCount]).tickFormat(timeFormat(\"%d\")).tickSizeOuter(0);\n      } else if (format === \"month\") {\n        axis = axisBottom(scale).tickArguments([utc ? utcMonth : timeMonth, 1, tickCount]).tickFormat(timeFormat(\"%B\")).tickSizeOuter(0);\n      } else if (format === \"year\") {\n        axis = axisBottom(scale).tickArguments([utc ? utcYear : timeYear, 1, tickCount]).tickFormat(timeFormat(\"%Y\")).tickSizeOuter(0);\n      } else if (format === \"relative\") {\n        axis = axisBottom(scale).ticks(tickCount).tickFormat(d => moment.duration(+d).format()).tickSizeOuter(0);\n      } else if (_.isString(format)) {\n        axis = axisBottom(scale).ticks(tickCount).tickFormat(timeFormat(format)).tickSizeOuter(0);\n      } else if (_.isFunction(format)) {\n        axis = axisBottom(scale).ticks(tickCount).tickFormat(format).tickSizeOuter(0);\n      } else {\n        axis = axisBottom(scale).ticks(tickCount).tickSize(0);\n      }\n    } else {\n      if (format === \"day\") {\n        axis = axisBottom(scale).tickArguments([utc ? utcDay : timeDay, 1]).tickFormat(timeFormat(\"%d\")).tickSizeOuter(0);\n      } else if (format === \"month\") {\n        axis = axisBottom(scale).tickArguments([utc ? utcMonth : timeMonth, 1]).tickFormat(timeFormat(\"%B\")).tickSizeOuter(0);\n      } else if (format === \"year\") {\n        axis = axisBottom(scale).tickArguments([utc ? utcYear : timeYear, 1]).tickFormat(timeFormat(\"%Y\")).tickSizeOuter(0);\n      } else if (format === \"relative\") {\n        axis = axisBottom(scale).tickFormat(d => moment.duration(+d).format()).tickSizeOuter(0);\n      } else if (_.isString(format)) {\n        axis = axisBottom(scale).tickFormat(timeFormat(format)).tickSizeOuter(0);\n      } else if (_.isFunction(format)) {\n        axis = axisBottom(scale).tickFormat(format).tickSizeOuter(0);\n      } else {\n        axis = axisBottom(scale).tickSize(0);\n      }\n    } // Remove the old axis from under this DOM node\n\n\n    select(ReactDOM.findDOMNode(this)).selectAll(\"*\").remove(); // eslint-disable-line\n    //\n    // Draw the new axis\n    //\n\n    select(ReactDOM.findDOMNode(this)) // eslint-disable-line\n    .append(\"g\").attr(\"class\", \"x axis\").style(\"stroke\", \"none\").styles(valueStyle).call(axis.tickSize(tickSize));\n\n    if (this.props.angled) {\n      select(ReactDOM.findDOMNode(this)) // eslint-disable-line\n      .select(\"g\").selectAll(\".tick\").select(\"text\").styles(valueStyle).style(\"text-anchor\", \"end\").attr(\"dx\", \"-1.2em\").attr(\"dy\", \"0em\").attr(\"transform\", function (d) {\n        return \"rotate(-65)\";\n      });\n    } else {\n      select(ReactDOM.findDOMNode(this)) // eslint-disable-line\n      .select(\"g\").selectAll(\".tick\").select(\"text\").styles(valueStyle);\n    }\n\n    select(ReactDOM.findDOMNode(this)) // eslint-disable-line\n    .select(\"g\").selectAll(\".tick\").select(\"line\").styles(tickStyle);\n    select(ReactDOM.findDOMNode(this)).select(\"g\").select(\"path\").remove();\n  }\n\n  render() {\n    return React.createElement(\"g\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    });\n  }\n\n}\nTimeAxis.defaultProps = {\n  showGrid: false,\n  style: defaultStyle,\n  angled: false\n};\nTimeAxis.propTypes = {\n  scale: PropTypes.func.isRequired,\n  showGrid: PropTypes.bool,\n  angled: PropTypes.bool,\n  gridHeight: PropTypes.number,\n  format: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  utc: PropTypes.bool,\n  style: PropTypes.shape({\n    label: PropTypes.object,\n    // eslint-disable-line\n    values: PropTypes.object,\n    // eslint-disable-line\n    axis: PropTypes.object // eslint-disable-line\n\n  }),\n  tickCount: PropTypes.number\n};","map":{"version":3,"sources":["C:\\Users\\golde\\resin\\src\\TimeAxis.js"],"names":["_","merge","moment","React","ReactDOM","PropTypes","axisBottom","select","timeDay","utcDay","timeMonth","utcMonth","timeYear","utcYear","timeFormat","scaleAsString","scale","domain","toString","range","defaultStyle","values","stroke","fill","fontWeight","fontSize","font","ticks","axis","TimeAxis","Component","componentDidMount","props","format","showGrid","gridHeight","renderTimeAxis","componentWillReceiveProps","nextProps","utc","shouldComponentUpdate","mergeStyles","style","valueStyle","tickStyle","tickSize","tickCount","tickArguments","tickFormat","tickSizeOuter","d","duration","isString","isFunction","findDOMNode","selectAll","remove","append","attr","styles","call","angled","render","defaultProps","propTypes","func","isRequired","bool","number","oneOfType","string","shape","label","object"],"mappings":"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","sourcesContent":["/**\r\n *  Copyright (c) 2015-present, The Regents of the University of California,\r\n *  through Lawrence Berkeley National Laboratory (subject to receipt\r\n *  of any required approvals from the U.S. Dept. of Energy).\r\n *  All rights reserved.\r\n *\r\n *  This source code is licensed under the BSD-style license found in the\r\n *  LICENSE file in the root directory of this source tree.\r\n */\r\n\r\nimport _ from \"underscore\";\r\nimport merge from \"merge\";\r\nimport moment from \"moment\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\"; // eslint-disable-line\r\nimport PropTypes from \"prop-types\";\r\nimport { axisBottom } from \"d3-axis\";\r\nimport { select } from \"d3-selection\";\r\nimport \"d3-selection-multi\";\r\nimport { timeDay, utcDay, timeMonth, utcMonth, timeYear, utcYear } from \"d3-time\";\r\nimport { timeFormat } from \"d3-time-format\";\r\n\r\nimport \"moment-duration-format\";\r\n\r\nfunction scaleAsString(scale) {\r\n    return `${scale.domain().toString()}-${scale.range().toString()}`;\r\n}\r\n\r\nconst defaultStyle = {\r\n    values: {\r\n        stroke: \"none\",\r\n        fill: \"#8B7E7E\", // Default value color\r\n        fontWeight: 100,\r\n        fontSize: 11,\r\n        font: '\"Goudy Bookletter 1911\", sans-serif\"'\r\n    },\r\n    ticks: {\r\n        fill: \"none\",\r\n        stroke: \"#C0C0C0\"\r\n    },\r\n    axis: {\r\n        fill: \"none\",\r\n        stroke: \"#C0C0C0\"\r\n    }\r\n};\r\n\r\n/**\r\n * Renders a horizontal time axis. This is used internally by the ChartContainer\r\n * as a result of you specifying the timerange for the chart. Please see the API\r\n * docs for ChartContainer for more information.\r\n */\r\nexport default class TimeAxis extends React.Component {\r\n    componentDidMount() {\r\n        const { scale, format, showGrid, gridHeight } = this.props;\r\n        this.renderTimeAxis(scale, format, showGrid, gridHeight);\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const { scale, utc, format, showGrid, gridHeight } = nextProps;\r\n        if (\r\n            scaleAsString(this.props.scale) !== scaleAsString(scale) ||\r\n            this.props.utc !== utc ||\r\n            this.props.showGrid !== showGrid ||\r\n            this.props.gridHeight !== gridHeight\r\n        ) {\r\n            this.renderTimeAxis(scale, format, showGrid, gridHeight);\r\n        }\r\n    }\r\n\r\n    // Force the component not to update because d3 will control the\r\n    // DOM from this point down.\r\n    shouldComponentUpdate() {\r\n        // eslint-disable-line\r\n        return false;\r\n    }\r\n\r\n    mergeStyles(style) {\r\n        return {\r\n            valueStyle: merge(\r\n                true,\r\n                defaultStyle.values,\r\n                this.props.style.values ? this.props.style.values : {}\r\n            ),\r\n            tickStyle: merge(\r\n                true,\r\n                defaultStyle.ticks,\r\n                this.props.style.ticks ? this.props.style.ticks : {}\r\n            )\r\n        };\r\n    }\r\n\r\n    renderTimeAxis(scale, format, showGrid, gridHeight) {\r\n        let axis;\r\n\r\n        const tickSize = showGrid ? -gridHeight : 10;\r\n        const utc = this.props.utc;\r\n        const tickCount = this.props.tickCount;\r\n        const style = this.mergeStyles(this.props.style);\r\n        const { tickStyle, valueStyle } = style;\r\n\r\n        if (tickCount > 0) {\r\n            if (format === \"day\") {\r\n                axis = axisBottom(scale)\r\n                    .tickArguments([utc ? utcDay : timeDay, 1, tickCount])\r\n                    .tickFormat(timeFormat(\"%d\"))\r\n                    .tickSizeOuter(0);\r\n            } else if (format === \"month\") {\r\n                axis = axisBottom(scale)\r\n                    .tickArguments([utc ? utcMonth : timeMonth, 1, tickCount])\r\n                    .tickFormat(timeFormat(\"%B\"))\r\n                    .tickSizeOuter(0);\r\n            } else if (format === \"year\") {\r\n                axis = axisBottom(scale)\r\n                    .tickArguments([utc ? utcYear : timeYear, 1, tickCount])\r\n                    .tickFormat(timeFormat(\"%Y\"))\r\n                    .tickSizeOuter(0);\r\n            } else if (format === \"relative\") {\r\n                axis = axisBottom(scale)\r\n                    .ticks(tickCount)\r\n                    .tickFormat(d => moment.duration(+d).format())\r\n                    .tickSizeOuter(0);\r\n            } else if (_.isString(format)) {\r\n                axis = axisBottom(scale)\r\n                    .ticks(tickCount)\r\n                    .tickFormat(timeFormat(format))\r\n                    .tickSizeOuter(0);\r\n            } else if (_.isFunction(format)) {\r\n                axis = axisBottom(scale)\r\n                    .ticks(tickCount)\r\n                    .tickFormat(format)\r\n                    .tickSizeOuter(0);\r\n            } else {\r\n                axis = axisBottom(scale)\r\n                    .ticks(tickCount)\r\n                    .tickSize(0);\r\n            }\r\n        } else {\r\n            if (format === \"day\") {\r\n                axis = axisBottom(scale)\r\n                    .tickArguments([utc ? utcDay : timeDay, 1])\r\n                    .tickFormat(timeFormat(\"%d\"))\r\n                    .tickSizeOuter(0);\r\n            } else if (format === \"month\") {\r\n                axis = axisBottom(scale)\r\n                    .tickArguments([utc ? utcMonth : timeMonth, 1])\r\n                    .tickFormat(timeFormat(\"%B\"))\r\n                    .tickSizeOuter(0);\r\n            } else if (format === \"year\") {\r\n                axis = axisBottom(scale)\r\n                    .tickArguments([utc ? utcYear : timeYear, 1])\r\n                    .tickFormat(timeFormat(\"%Y\"))\r\n                    .tickSizeOuter(0);\r\n            } else if (format === \"relative\") {\r\n                axis = axisBottom(scale)\r\n                    .tickFormat(d => moment.duration(+d).format())\r\n                    .tickSizeOuter(0);\r\n            } else if (_.isString(format)) {\r\n                axis = axisBottom(scale)\r\n                    .tickFormat(timeFormat(format))\r\n                    .tickSizeOuter(0);\r\n            } else if (_.isFunction(format)) {\r\n                axis = axisBottom(scale)\r\n                    .tickFormat(format)\r\n                    .tickSizeOuter(0);\r\n            } else {\r\n                axis = axisBottom(scale).tickSize(0);\r\n            }\r\n        }\r\n\r\n        // Remove the old axis from under this DOM node\r\n        select(ReactDOM.findDOMNode(this))\r\n            .selectAll(\"*\")\r\n            .remove(); // eslint-disable-line\r\n        //\r\n        // Draw the new axis\r\n        //\r\n        select(ReactDOM.findDOMNode(this)) // eslint-disable-line\r\n            .append(\"g\")\r\n            .attr(\"class\", \"x axis\")\r\n            .style(\"stroke\", \"none\")\r\n            .styles(valueStyle)\r\n            .call(axis.tickSize(tickSize));\r\n\r\n        if (this.props.angled) {\r\n            select(ReactDOM.findDOMNode(this)) // eslint-disable-line\r\n                .select(\"g\")\r\n                .selectAll(\".tick\")\r\n                .select(\"text\")\r\n                .styles(valueStyle)\r\n                .style(\"text-anchor\", \"end\")\r\n                .attr(\"dx\", \"-1.2em\")\r\n                .attr(\"dy\", \"0em\")\r\n                .attr(\"transform\", function(d) {\r\n                    return \"rotate(-65)\";\r\n                });\r\n        } else {\r\n            select(ReactDOM.findDOMNode(this)) // eslint-disable-line\r\n                .select(\"g\")\r\n                .selectAll(\".tick\")\r\n                .select(\"text\")\r\n                .styles(valueStyle);\r\n        }\r\n        select(ReactDOM.findDOMNode(this)) // eslint-disable-line\r\n            .select(\"g\")\r\n            .selectAll(\".tick\")\r\n            .select(\"line\")\r\n            .styles(tickStyle);\r\n\r\n        select(ReactDOM.findDOMNode(this))\r\n            .select(\"g\")\r\n            .select(\"path\")\r\n            .remove();\r\n    }\r\n\r\n    render() {\r\n        return <g />;\r\n    }\r\n}\r\n\r\nTimeAxis.defaultProps = {\r\n    showGrid: false,\r\n    style: defaultStyle,\r\n    angled: false\r\n};\r\n\r\nTimeAxis.propTypes = {\r\n    scale: PropTypes.func.isRequired,\r\n    showGrid: PropTypes.bool,\r\n    angled: PropTypes.bool,\r\n    gridHeight: PropTypes.number,\r\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\r\n    utc: PropTypes.bool,\r\n    style: PropTypes.shape({\r\n        label: PropTypes.object, // eslint-disable-line\r\n        values: PropTypes.object, // eslint-disable-line\r\n        axis: PropTypes.object // eslint-disable-line\r\n    }),\r\n    tickCount: PropTypes.number\r\n};\r\n"]},"metadata":{},"sourceType":"module"}